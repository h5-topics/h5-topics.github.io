{"version":3,"file":"static/webpack/static\\development\\pages\\topic.js.92376584e2292e391d57.hot-update.js","sources":["webpack:///./components/common/share.jsx"],"sourcesContent":["\r\nconst isPC = () => {\r\n  return !(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(navigator.userAgent))\r\n}\r\n\r\nconst isiOS = () => {\r\n  return !!(navigator.userAgent.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/))\r\n}\r\n\r\nvar Share = function (ele) {\r\n  this.ele = ele\r\n}\r\n\r\nShare.init = function () {\r\n  var eles = document.querySelectorAll('[data-share]')\r\n  var i\r\n  var l = eles.length\r\n  for (i = 0; i < l; i++) {\r\n    eles[i].addEventListener('click', Share.add)\r\n  }\r\n}\r\n\r\nShare.add = function (ele) {\r\n  var target = ele.currentTarget || ele.srcElement\r\n  var share = new Share(target)\r\n  share.getShareData()\r\n}\r\n\r\nShare.prototype = {\r\n  constructor: Share,\r\n\r\n  getValue: function (attr) {\r\n    var val = this.ele.getAttribute('data-' + attr)\r\n    if (!val) return\r\n    // facebook hashtag\r\n    if (attr === 'hashtag') {\r\n      if (!val.startsWith('#')) {\r\n        val = '#' + val\r\n      }\r\n    }\r\n    return val\r\n  },\r\n\r\n  getShareData: function () {\r\n    var share = this.getValue('share').toLowerCase()\r\n    var shares = {\r\n      facebook: {\r\n        shareUrl: 'https://www.facebook.com/sharer/sharer.php',\r\n        // shareUrl: 'https://www.facebook.com/dialog/share',\r\n        params: {\r\n          u: this.getValue('url'),\r\n          hashtag: this.getValue('hashtag'),\r\n          title: this.getValue('title'),\r\n          description: this.getValue('description'),\r\n          quote: this.getValue('quote')\r\n          // app_id: 360406121199259,\r\n          // display: 'popup',\r\n          // redirect_uri: 'https://www.wps.com',\r\n          // href: this.getValue('url'),\r\n          // link: this.getValue('url')\r\n          // quote: this.getValue('title'),\r\n          // hashtag: this.getValue('hashtag')\r\n        }\r\n      },\r\n      messenger: {\r\n        shareUrl: isPC() ? 'https://www.facebook.com/dialog/send' : 'fb-messenger://share',\r\n        params: isPC() ? {\r\n          // u: this.getValue('url'),\r\n          hashtag: this.getValue('hashtag'),\r\n          title: this.getValue('title'),\r\n          description: this.getValue('description'),\r\n          quote: this.getValue('quote'),\r\n          app_id: 360406121199259,\r\n          display: 'popup',\r\n          redirect_uri: 'https://www.wps.com',\r\n          href: this.getValue('url'),\r\n          link: this.getValue('url')\r\n          // quote: this.getValue('title'),\r\n          // hashtag: this.getValue('hashtag')\r\n        } : {\r\n          app_id: 360406121199259,\r\n          link: this.getValue('url')\r\n        },\r\n        isLink: !isPC()\r\n      },\r\n      twitter: {\r\n        shareUrl: 'https://twitter.com/intent/tweet/',\r\n        params: {\r\n          text: this.getValue('title'),\r\n          url: this.getValue('url'),\r\n          hashtags: this.getValue('hashtags'),\r\n          via: this.getValue('via')\r\n        }\r\n      },\r\n      whatsapp: {\r\n        shareUrl: isPC() ? 'https://wa.me/' : 'whatsapp://send',\r\n        params: {\r\n          text: this.getValue('title') + ' ' + this.getValue('url')\r\n        },\r\n        isLink: !isPC()\r\n      },\r\n      googleplus: {\r\n        shareUrl: 'https://plus.google.com/share',\r\n        params: {\r\n          url: this.getValue('url')\r\n        }\r\n      },\r\n      email: {\r\n        shareUrl: 'mailto:',\r\n        params: {\r\n          subject: this.getValue('subject'),\r\n          body: this.getValue('title') + '\\n' + this.getValue('url')\r\n        },\r\n        isLink: true\r\n      },\r\n      sms: {\r\n        shareUrl: (isiOS() ? 'sms:// &body=' : 'sms:// ?body=') + this.getValue('title') + '\\n' + this.getValue('url'),\r\n        isLink: true\r\n      },\r\n      line: {\r\n        shareUrl: 'http://line.me/R/msg/text/?' + encodeURIComponent(this.getValue('title') + ' ' + this.getValue('url')),\r\n        isLink: true\r\n      },\r\n      hackernews: {\r\n        shareUrl: 'https://news.ycombinator.com/submitlink',\r\n        params: {\r\n          u: this.getValue('url'),\r\n          t: this.getValue('title')\r\n        }\r\n      },\r\n      linkedin: {\r\n        shareUrl: 'https://www.linkedin.com/shareArticle',\r\n        params: {\r\n          url: this.getValue('url'),\r\n          title: this.getValue('title'),\r\n          summary: this.getValue('summary'),\r\n          mini: true\r\n        }\r\n      },\r\n      vk: {\r\n        shareUrl: 'http://vk.com/share.php',\r\n        params: {\r\n          url: this.getValue('url'),\r\n          title: this.getValue('title'),\r\n          description: this.getValue('caption'),\r\n          image: this.getValue('image')\r\n        }\r\n      },\r\n      xing: {\r\n        shareUrl: 'https://www.xing.com/app/user',\r\n        params: {\r\n          'op': 'share',\r\n          'url': this.getValue('url'),\r\n          'title': this.getValue('title')\r\n        }\r\n      }\r\n    }\r\n    var s = shares[share]\r\n\r\n    if (s) {\r\n      s.width = this.getValue('width')\r\n      s.height = this.getValue('height')\r\n    }\r\n    return s !== undefined ? this.urlShare(s) : false\r\n  },\r\n\r\n  urlShare: function (share) {\r\n    var p = share.params || {}\r\n    var keys = Object.keys(p)\r\n    var i\r\n    var str = keys.length > 0 ? '?' : ''\r\n    for (i = 0; i < keys.length; i++) {\r\n      if (str !== '?') {\r\n        str += '&'\r\n      }\r\n      if (p[keys[i]]) {\r\n        str += keys[i] + '=' + encodeURIComponent(p[keys[i]])\r\n      }\r\n    }\r\n    share.shareUrl += str\r\n\r\n    if (!share.isLink) {\r\n      var popWidth = share.width || 600\r\n      var popHeight = share.height || 480\r\n      var left = window.innerWidth / 2 - popWidth / 2 + window.screenX\r\n      var top = window.innerHeight / 2 - popHeight / 2 + window.screenY\r\n      var popParams = 'scrollbars=no, width=' + popWidth + ', height=' + popHeight + ', top=' + top + ', left=' + left\r\n      var newWindow = window.open(share.shareUrl, '', popParams)\r\n\r\n      if (window.focus) {\r\n        newWindow.focus()\r\n      }\r\n    } else {\r\n      console.log(share.shareUrl)\r\n      window.location.href = share.shareUrl\r\n    }\r\n  }\r\n}\r\n\r\nexport default Share\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAHA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAbA;AAcA;AACA;AAFA;AAIA;AAnBA;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAFA;AASA;AACA;AACA;AACA;AADA;AAGA;AALA;AAOA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AAQA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAFA;AAFA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAFA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAFA;AASA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAvGA;AAgHA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxKA;AA2KA;;;;A","sourceRoot":""}